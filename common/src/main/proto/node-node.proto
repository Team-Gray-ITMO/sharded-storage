syntax = "proto3";

option java_multiple_files = true;
option java_package = "vk.itmo.teamgray.sharded.storage.node.node";

package vk.itmo.teamgray.sharded.storage;

service NodeNodeService {
  rpc SendShard (SendShardRequest) returns (SendShardResponse);

  rpc SendShardFragment (SendShardFragmentRequest) returns (SendShardFragmentResponse);
}

message SendShardRequest {
  int32 shardId = 1;
  map<string, string> shard = 2;
}

message SendShardResponse {
  bool success = 1;
  string message = 2;
}

message SendShardFragmentRequest {
  int32 shardId = 1;
  map<string, string> shardFragments = 2;
}

message SendShardFragmentResponse {
  bool success = 1;
  string message = 2;
}